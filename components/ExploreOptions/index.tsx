import { NextRouter, useRouter } from 'next/router';
import { ChevronDownIcon } from '@heroicons/react/20/solid';
import React from 'react';
import { useTranslation } from 'next-i18next';

import DropdownMenu, { DropdownItemType } from 'components/DropdownMenu';
import useStore from 'modules/Store';

const ExploreOptions = ({ setRole }: any) => {
  const roles = useStore((state) => state.roles);
  const { t } = useTranslation();
  const router: NextRouter = useRouter();
  const currentRoute = router.pathname;
  const isActive = currentRoute === '/explore';
  const routeStyle = isActive
    ? 'bg-card text-button py-2 px-3 2xl:px-3.5'
    : 'text-inputGray hover:text-button px-3 2xl:px-3.5';

  const popoverButton = (open: boolean) => (
    <div
      className={
        routeStyle +
        `
                ${open ? '' : ' text-opacity-90'}
                  mx-2 xl:mr-3 2xl:mx-4 font-custom2 text-lg cursor-pointer flex justify-center items-center`
      }
    >
      <span>{t('header.explore')}</span>
      <ChevronDownIcon
        className={`${open ? '' : 'text-opacity-70'}
                  ml-2 h-5 w-5 text-inputGray transition duration-150 ease-in-out group-hover:text-opacity-80`}
        aria-hidden="true"
      />
    </div>
  );

  const licensorItem: DropdownItemType = {
    name: `${t('explore-licensors')}`,
    link: '/explore',
    show: true,
    onClick: () => setRole('licensor'),
    icon: () => (
      <svg
        width="48"
        height="48"
        viewBox="0 0 48 48"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <rect width="48" height="48" rx="8" fill="rgba(74,167,202,.2)" />
        <path
          d="M28.0413 20L23.9998 13L19.9585 20M32.0828 27.0001L36.1242 34H28.0415M19.9585 34H11.8755L15.9171 27"
          stroke="#1c4c5f"
          strokeWidth="2"
        />
        <path
          fillRule="evenodd"
          clipRule="evenodd"
          d="M18.804 30H29.1963L24.0001 21L18.804 30Z"
          stroke="#1c4c5f"
          strokeWidth="2"
        />
      </svg>
    ),
  };

  const collaborationItem: DropdownItemType = {
    name: `${t('explore-collaborations')}`,
    link: '/explore',
    show: true,
    onClick: () => setRole('collaboration'),
    icon: () => (
      <svg
        xmlns="http://www.w3.org/2000/svg"
        shapeRendering="geometricPrecision"
        textRendering="geometricPrecision"
        imageRendering="optimizeQuality"
        fillRule="evenodd"
        clipRule="evenodd"
        viewBox="0 0 512 512"
        width="48"
        height="48"
      >
        <rect
          width="503.995"
          height="501.036"
          rx="100"
          fill="rgba(74,167,202,.2)"
          x="-1.728"
          y="0.659"
        />
        <path
          d="M 290.001 238.322 L 298.259 247.466 C 300.43 249.869 300.338 253.707 298.052 255.989 L 291.051 262.981 C 292.871 266.774 294.2 270.807 295 274.972 L 303.834 275.205 C 306.994 275.286 309.509 278.076 309.425 281.39 L 309.126 293.994 C 309.041 297.308 306.396 299.953 303.244 299.864 L 293.597 299.606 C 292.323 303.636 290.546 307.47 288.313 311.008 L 294.418 317.758 C 296.588 320.161 296.496 323.999 294.21 326.281 L 285.515 334.966 C 283.229 337.248 279.579 337.151 277.409 334.748 L 270.761 327.394 C 267.156 329.297 263.307 330.7 259.358 331.539 L 259.128 340.836 C 259.051 344.15 256.405 346.795 253.246 346.715 L 241.268 346.392 C 238.116 346.303 235.601 343.521 235.685 340.207 L 235.931 330.063 C 232.099 328.723 228.452 326.855 225.088 324.507 L 218.669 330.918 C 216.384 333.208 212.734 333.103 210.556 330.7 L 202.305 321.564 C 200.127 319.161 200.219 315.323 202.512 313.04 L 209.505 306.049 C 207.685 302.256 206.357 298.223 205.556 294.058 L 196.722 293.825 C 193.57 293.744 191.047 290.954 191.124 287.64 L 191.439 275.036 C 191.515 271.722 194.161 269.077 197.313 269.166 L 206.959 269.424 C 208.232 265.4 210.011 261.545 212.243 258.013 L 206.147 251.272 C 203.976 248.861 204.068 245.031 206.354 242.749 L 215.042 234.064 C 217.327 231.774 220.977 231.871 223.147 234.282 L 229.804 241.636 C 233.362 239.749 237.188 238.338 241.199 237.483 L 241.429 228.194 C 241.506 224.88 244.151 222.235 247.311 222.315 L 259.289 222.638 C 262.44 222.727 264.956 225.508 264.879 228.823 L 264.633 238.967 C 268.46 240.297 272.118 242.168 275.477 244.515 L 281.887 238.112 C 284.18 235.822 287.83 235.927 290.008 238.33 L 290.001 238.322 Z M 128.895 239.999 C 126.756 244.7 121.38 246.676 116.902 244.426 C 112.431 242.176 110.552 236.556 112.692 231.822 C 117.423 221.396 123.251 211.615 129.999 202.624 C 136.771 193.593 144.473 185.379 152.966 178.134 C 156.823 174.82 162.49 175.441 165.596 179.489 C 168.748 183.545 168.157 189.504 164.3 192.778 C 156.823 199.188 150.014 206.405 144.086 214.308 C 138.159 222.251 133.074 230.839 128.895 239.999 Z M 214.359 73.217 C 232.043 50.243 252.418 37.744 267.724 58.186 C 285.315 59.153 292.853 87.223 280.752 101.069 C 281.619 101.061 282.439 101.246 283.137 101.649 C 284.065 102.173 284.763 103.036 285.116 104.262 C 285.837 106.729 284.824 109.197 284.303 111.592 C 283.498 115.285 282.601 119.349 278.598 119.123 L 277.953 119.051 C 277.808 126.695 274.265 130.211 269.618 134.799 C 270.5 136.154 271.389 137.525 272.356 138.831 C 272.977 139.662 273.383 140.218 274.112 140.863 C 282.102 147.911 297.14 149.443 305.613 154.418 C 308.351 156.015 310.828 158.055 312.814 160.821 C 317.791 167.732 318.596 173.707 319.593 182.037 C 319.723 182.609 319.8 183.182 319.8 183.762 C 319.8 184.916 318.91 185.851 317.821 185.851 L 185.917 185.851 C 184.828 185.851 183.939 184.916 183.939 183.762 C 183.939 183.174 184.023 182.585 184.154 182.013 C 185.158 173.691 185.956 167.724 190.925 160.821 C 192.919 158.055 195.388 156.023 198.125 154.418 C 206.507 149.5 220.816 147.943 229.343 141.105 C 230.747 138.557 231.866 135.477 232.825 132.711 C 229.443 129.421 226.851 125.857 226.261 119.075 L 225.862 119.083 C 224.919 119.075 224.014 118.849 223.178 118.341 C 221.315 117.228 220.295 115.1 219.796 112.664 C 219.206 109.761 218.5 101.391 222.304 99.762 C 221.836 90.594 223.316 76.071 214.359 73.217 Z M 267.402 137.009 C 262.808 141.508 257.793 143.694 252.709 143.702 C 247.395 143.702 242.058 141.299 237.104 136.662 L 235.248 134.961 C 234.236 137.775 232.971 141.138 231.399 143.613 C 239.75 161.41 264.419 162.031 272.409 143.718 C 270.408 141.573 268.882 139.291 267.402 137.009 Z M 265.354 75.394 C 261.321 79.659 257.065 80.893 252.878 81.272 C 251.651 81.506 250.439 81.659 249.243 81.821 C 245.232 82.337 241.222 82.861 235.915 86.715 C 233.392 88.554 231.713 90.779 230.862 93.36 C 229.995 95.981 229.942 99.053 230.67 102.536 C 230.731 102.867 230.716 103.222 230.601 103.569 C 230.271 104.52 229.259 105.012 228.347 104.665 C 226.936 104.125 223.891 102.415 223.132 104.318 C 222.879 106.334 222.726 109.391 223.232 111.898 C 223.769 114.535 224.704 116.003 227.38 115.14 L 227.856 115.059 C 228.822 115.035 229.627 115.833 229.643 116.858 C 229.834 125.195 233.362 128.397 237.641 132.275 L 239.435 133.912 C 243.745 137.936 248.277 140.017 252.709 140.017 C 257.034 140.017 261.351 138.033 265.377 133.945 L 267.195 132.13 C 271.688 127.695 275.001 124.421 274.365 116.454 C 274.257 114.938 275.852 113.898 277.079 114.761 C 277.57 115.092 278.184 115.414 278.774 115.446 C 280.254 115.527 281.067 109.6 281.581 108.012 C 281.895 106.77 281.933 105.907 281.772 105.343 C 281.596 104.746 281.09 104.714 280.568 104.762 C 279.702 104.851 278.659 105.31 277.685 106.068 C 277.302 106.423 276.78 106.592 276.236 106.496 C 275.279 106.326 274.636 105.372 274.802 104.367 C 276.458 94.231 275.699 87.618 273.644 83.119 C 271.849 79.176 268.974 76.773 265.86 74.991 L 265.354 75.394 Z M 339.393 288.648 C 357.076 265.666 377.451 253.175 392.757 273.609 C 410.348 274.576 417.886 302.654 405.786 316.492 C 406.652 316.484 407.473 316.669 408.171 317.08 C 409.098 317.605 409.796 318.467 410.149 319.693 C 410.87 322.153 409.865 324.62 409.336 327.015 C 408.531 330.708 407.641 334.772 403.631 334.555 L 402.994 334.474 C 402.841 342.118 399.298 345.634 394.651 350.222 C 395.533 351.585 396.423 352.948 397.389 354.254 C 398.01 355.085 398.416 355.641 399.145 356.286 C 407.135 363.334 422.173 364.866 430.647 369.842 C 433.392 371.438 435.861 373.486 437.847 376.244 C 442.824 383.155 443.629 389.13 444.626 397.46 C 444.757 398.032 444.833 398.605 444.833 399.185 C 444.833 400.339 443.944 401.274 442.855 401.274 L 310.951 401.274 C 309.862 401.274 308.972 400.339 308.972 399.185 C 308.972 398.597 309.057 398.008 309.187 397.436 C 310.191 389.114 310.989 383.147 315.966 376.244 C 317.952 373.486 320.421 371.446 323.159 369.842 C 331.54 364.923 345.85 363.366 354.377 356.528 C 355.78 353.98 356.9 350.9 357.858 348.134 C 354.484 344.844 351.885 341.288 351.294 334.506 L 350.895 334.514 C 349.952 334.498 349.047 334.272 348.211 333.764 C 346.348 332.652 345.328 330.523 344.83 328.087 C 344.239 325.193 343.534 316.822 347.337 315.193 C 346.869 306.017 348.349 291.494 339.393 288.648 Z M 392.435 352.432 C 387.842 356.931 382.834 359.117 377.75 359.125 C 372.428 359.125 367.091 356.73 362.137 352.093 L 360.281 350.384 C 359.269 353.198 358.004 356.561 356.432 359.036 C 364.783 376.833 389.452 377.454 397.443 359.141 C 395.441 356.996 393.915 354.714 392.435 352.432 Z M 390.388 290.817 C 386.354 295.083 382.098 296.316 377.911 296.695 C 376.684 296.929 375.473 297.09 374.276 297.244 C 370.266 297.768 366.255 298.284 360.949 302.146 C 358.433 303.985 356.746 306.202 355.895 308.783 C 355.029 311.404 354.975 314.476 355.703 317.959 C 355.772 318.29 355.749 318.645 355.634 318.992 C 355.3 319.945 354.296 320.434 353.388 320.088 C 351.969 319.548 348.925 317.838 348.165 319.741 C 347.912 321.757 347.759 324.814 348.265 327.329 C 348.802 329.958 349.737 331.426 352.414 330.563 L 352.889 330.482 C 353.855 330.458 354.661 331.265 354.684 332.281 C 354.868 340.627 358.395 343.82 362.682 347.698 L 364.476 349.335 C 368.778 353.359 373.318 355.44 377.75 355.44 C 382.067 355.44 386.385 353.456 390.411 349.368 L 392.228 347.561 C 396.722 343.118 400.034 339.844 399.398 331.877 C 399.291 330.369 400.886 329.321 402.12 330.184 C 402.603 330.515 403.224 330.845 403.807 330.869 C 405.287 330.95 406.108 325.023 406.614 323.435 C 406.928 322.201 406.967 321.33 406.806 320.766 C 406.629 320.169 406.123 320.137 405.602 320.185 C 404.735 320.274 403.7 320.733 402.718 321.491 C 402.343 321.846 401.814 322.023 401.269 321.927 C 400.314 321.75 399.673 320.796 399.835 319.79 C 401.491 309.654 400.732 303.041 398.677 298.542 C 396.883 294.599 394.007 292.204 390.894 290.414 L 390.388 290.817 Z M 82.632 288.648 C 100.315 265.666 120.69 253.175 135.996 273.609 C 153.58 274.576 161.118 302.654 149.025 316.492 C 149.884 316.484 150.704 316.669 151.41 317.08 C 152.33 317.605 153.035 318.467 153.388 319.693 C 154.109 322.153 153.097 324.62 152.575 327.015 C 151.77 330.708 150.873 334.772 146.87 334.555 L 146.226 334.474 C 146.08 342.118 142.53 345.634 137.89 350.222 C 138.772 351.585 139.654 352.948 140.628 354.254 C 141.241 355.085 141.648 355.641 142.384 356.286 C 150.374 363.334 165.412 364.866 173.886 369.842 C 176.623 371.438 179.1 373.486 181.086 376.244 C 186.063 383.155 186.861 389.13 187.865 397.46 C 187.988 398.032 188.072 398.605 188.072 399.185 C 188.072 400.339 187.183 401.274 186.094 401.274 L 54.19 401.274 C 53.101 401.274 52.211 400.339 52.211 399.185 C 52.211 398.597 52.295 398.008 52.426 397.436 C 53.423 389.114 54.228 383.147 59.197 376.244 C 61.191 373.486 63.66 371.446 66.398 369.842 C 74.772 364.923 89.088 363.366 97.616 356.528 C 99.019 353.98 100.139 350.9 101.089 348.134 C 97.715 344.844 95.116 341.288 94.533 334.506 L 94.134 334.514 C 93.191 334.498 92.286 334.272 91.45 333.764 C 89.579 332.652 88.567 330.523 88.069 328.087 C 87.478 325.193 86.773 316.822 90.576 315.193 C 90.108 306.017 91.581 291.494 82.632 288.648 Z M 135.666 352.432 C 131.081 356.931 126.065 359.117 120.981 359.125 C 115.667 359.125 110.33 356.73 105.376 352.093 L 103.513 350.384 C 102.508 353.198 101.243 356.561 99.671 359.036 C 108.014 376.833 132.691 377.454 140.681 359.141 C 138.68 356.996 137.154 354.714 135.666 352.432 Z M 133.626 290.817 C 129.593 295.083 125.329 296.316 121.15 296.695 C 119.915 296.929 118.711 297.09 117.508 297.244 C 113.497 297.768 109.494 298.284 104.187 302.146 C 101.665 303.985 99.985 306.202 99.126 308.783 C 98.26 311.404 98.214 314.476 98.942 317.959 C 99.004 318.29 98.988 318.645 98.873 318.992 C 98.544 319.943 97.531 320.435 96.619 320.088 C 95.208 319.548 92.163 317.838 91.404 319.741 C 91.151 321.757 90.998 324.814 91.504 327.329 C 92.033 329.958 92.976 331.426 95.653 330.563 L 96.128 330.482 C 97.094 330.458 97.899 331.265
       97.915 332.281 C 98.106 340.627 101.634 343.82 105.913 347.698 L 107.707 349.335 C 112.009 353.359 116.549 355.44 120.981 355.44 C 125.299 355.44 129.624 353.456 133.649 349.368 L 135.467 347.561 C 139.961 343.118 143.273 339.844 142.637 331.877 C 142.522 330.369 144.117 329.321 145.351 330.184 C 145.835 330.515 146.456 330.845 147.046 330.869 C 148.526 330.95 149.339 325.023 149.853 323.435 C 150.167 322.201 150.206 321.33 150.045 320.766 C 149.868 320.169 149.362 320.137 148.841 320.185 C 147.974 320.274 146.931 320.733 145.957 321.491 C 145.574 321.846 145.052 322.023 144.508 321.927 C 143.55 321.754 142.908 320.796 143.074 319.79 C 144.723 309.654 143.971 303.041 141.916 298.542 C 140.114 294.599 137.246 292.204 134.133 290.414 L 133.626 290.817 Z M 340.643 194.415 C 336.854 191.076 336.364 185.109 339.538 181.126 C 342.721 177.142 348.388 176.626 352.176 179.964 C 353.993 181.569 355.42 182.867 356.486 183.883 C 357.782 185.109 359.147 186.512 360.634 188.012 C 366.079 193.665 371.102 199.664 375.572 205.994 C 380.096 212.401 384.156 219.156 387.719 226.202 C 390.02 230.839 388.332 236.556 383.961 238.975 C 379.552 241.394 374.108 239.62 371.815 235.024 C 368.732 228.887 365.166 222.96 361.156 217.34 C 357.107 211.655 352.728 206.333 348.035 201.503 C 346.961 200.374 345.727 199.188 344.4 197.89 C 342.813 196.39 341.548 195.229 340.643 194.415 Z M 292.953 411.386 C 297.654 409.717 302.738 412.41 304.325 417.345 C 305.92 422.288 303.359 427.634 298.658 429.304 C 291.174 431.965 283.429 434.005 275.461 435.335 C 267.593 436.698 259.588 437.375 251.551 437.375 C 243.354 437.375 235.217 436.666 227.219 435.271 C 219.022 433.835 211.116 431.723 203.57 428.997 C 198.869 427.296 196.346 421.909 197.964 416.966 C 199.582 412.031 204.705 409.378 209.398 411.08 C 216.138 413.491 223.071 415.369 230.072 416.595 C 236.974 417.789 244.136 418.434 251.52 418.434 C 258.775 418.434 265.807 417.821 272.547 416.668 C 279.579 415.507 286.381 413.7 292.953 411.386 Z M 250.876 259.747 C 263.89 260.094 274.165 271.472 273.836 285.148 C 273.506 298.824 262.686 309.638 249.68 309.283 C 236.674 308.936 226.391 297.558 226.721 283.882 C 227.051 270.206 237.871 259.392 250.876 259.747 Z"
        />
      </svg>
    ),
  };

  const filteredLinks =
    roles.includes('licensee') && !roles.includes('licensor')
      ? [licensorItem]
      : [licensorItem, collaborationItem];

  return (
    <DropdownMenu
      buttonElem={popoverButton}
      panelClasses="transform -translate-x-1/4 left-1/4"
      items={filteredLinks}
    />
  );
};

export default ExploreOptions;
